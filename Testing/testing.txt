param(
    [string]$a,
    [string]$b
)

$enc = [System.Text.Encoding]::UTF8

function xor {
    param(
        [string]$dataBytes,
        [string]$keyBytes
    )

    for ($i = 0; $i -lt $dataBytes.Length; $i++) {
        $dataBytes[$i] -bxor $keyBytes[$i % $keyBytes.Length]
    }

    return $dataBytes
}

$keyBytes = $enc.GetBytes($key)
$dataBytes = [Convert]::FromBase64String($data)
$decryptedBytes = xor -dataBytes $dataBytes -keyBytes $keyBytes
$decryptedBytes = Invoke-XorDecryption -dataBytes $dataBytes -keyBytes $keyBytes
$decryptedString = $enc.GetString($decryptedBytes)

Write-Output $decryptedString
# Invoke-Expression $decryptedString
